# ë°°í¬ íŒŒì´í”„ë¼ì¸ ì„¤ì • ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. GitHub Actions CI/CD ì›Œí¬í”Œë¡œìš°
- âœ… `.github/workflows/ci-cd.yml` ìƒì„±
  - Lint ë° Type ì²´í¬ (ëª¨ë“  í‘¸ì‹œ/PR)
  - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
  - Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ í‘¸ì‹œ
  - Trivy ë³´ì•ˆ ìŠ¤ìº”
  - ìë™ ë°°í¬ (develop â†’ staging, main â†’ production)
  - ë°°í¬ í›„ ê±´ê°• ê²€ì‚¬

### 2. Docker êµ¬ì„± íŒŒì¼
- âœ… `Dockerfile` (ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œ)
  - Stage 1: ì˜ì¡´ì„± ì„¤ì¹˜
  - Stage 2: Next.js ì•± ë¹Œë“œ
  - Stage 3: í”„ë¡œë•ì…˜ ëŸ°íƒ€ì„ (ë¹„ë£¨íŠ¸ ì‚¬ìš©ì)
  - ê±´ê°• ê²€ì‚¬ í¬í•¨

- âœ… `docker-compose.yml` (ê°œë°œ í™˜ê²½)
  - Hot reloadë¥¼ ìœ„í•œ ë³¼ë¥¨ ë§ˆìš´íŠ¸
  - ê°œë°œìš© í™˜ê²½ ë³€ìˆ˜

- âœ… `docker-compose.staging.yml` (ìŠ¤í…Œì´ì§• í™˜ê²½)
  - Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ
  - ê¸°ë³¸ ë ˆì´íŠ¸ ì œí•œ

- âœ… `docker-compose.prod.yml` (í”„ë¡œë•ì…˜ í™˜ê²½)
  - ë¦¬ì†ŒìŠ¤ ì œí•œ ì„¤ì •
  - êµ¬ì¡°í™”ëœ ë¡œê¹…
  - ê³ ê°€ìš©ì„± ì„¤ì •

### 3. Nginx ì„¤ì •
- âœ… `nginx-staging.conf`
  - HTTP í”„ë¡ì‹œ
  - ë ˆì´íŠ¸ ì œí•œ (10r/s)
  - Gzip ì••ì¶•

- âœ… `nginx-prod.conf` (í”„ë¡œë•ì…˜ê¸‰)
  - HTTP â†’ HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
  - SSL/TLS (Let's Encrypt)
  - ë³´ì•ˆ í—¤ë” (HSTS, CSP, X-Frame-Options)
  - ìºì‹± (ì •ì  íŒŒì¼ 30ì¼, API 1ë¶„)
  - ë ˆì´íŠ¸ ì œí•œ (50r/s ì¼ë°˜, 100r/s API)
  - ì—°ê²° í’€ë§

### 4. í™˜ê²½ íŒŒì¼ í…œí”Œë¦¿
- âœ… `.env.staging.example` - ìŠ¤í…Œì´ì§•ìš© í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
- âœ… `.env.prod.example` - í”„ë¡œë•ì…˜ìš© í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
- âœ… `.gitignore` ì—…ë°ì´íŠ¸ - ì‹¤ì œ í™˜ê²½ íŒŒì¼ ì œì™¸

### 5. Kubernetes ì„¤ì • (ì„ íƒ)
- âœ… `kubernetes-manifests.yaml`
  - Deployment (3-10ê°œ ë³µì œë³¸)
  - Service (ë¡œë“œ ë°¸ëŸ°ì‹±)
  - HorizontalPodAutoscaler (ìë™ ìŠ¤ì¼€ì¼ë§)
  - PodDisruptionBudget (ê³ ê°€ìš©ì„±)
  - Ingress (ì™¸ë¶€ ì ‘ê·¼)
  - NetworkPolicy (ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬)

### 6. ë¬¸ì„œ
- âœ… `DEPLOYMENT.md` (ìƒì„¸ ë°°í¬ ê°€ì´ë“œ)
  - ì•„í‚¤í…ì²˜ ê°œìš”
  - GitHub ì‹œí¬ë¦¿ ì„¤ì •
  - ì„œë²„ ì„¤ì • ë°©ë²•
  - ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…
  - ìŠ¤ì¼€ì¼ë§ ì˜µì…˜
  - ë¡¤ë°± ì ˆì°¨

- âœ… `GITHUB_SECRETS_SETUP.md` (GitHub Actions ì‹œí¬ë¦¿ ì„¤ì •)
  - ë‹¨ê³„ë³„ ì„¤ì • ë°©ë²•
  - SSH í‚¤ ìƒì„± ë°©ë²•
  - í™˜ê²½ ë³´í˜¸ ê·œì¹™
  - ë¸Œëœì¹˜ ë³´í˜¸ ì„¤ì •
  - ë¬¸ì œ í•´ê²°

### 7. ë¡œì»¬ í…ŒìŠ¤íŠ¸
- âœ… npm ì˜ì¡´ì„± ì„¤ì¹˜ (`npm ci`)
- âœ… Docker ì´ë¯¸ì§€ ë¹Œë“œ ì„±ê³µ (488MB)
- âœ… docker-compose ì„¤ì • ê²€ì¦

### 8. GitHub ì €ì¥ì†Œ
- âœ… ëª¨ë“  íŒŒì¼ ì»¤ë°‹ ë° í‘¸ì‹œ ì™„ë£Œ
- âœ… ì»¤ë°‹ ë©”ì‹œì§€: "Set up CI/CD deployment pipeline with GitHub Actions"

---

## ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„ (í•„ìˆ˜)

### 1ë‹¨ê³„: GitHub ì‹œí¬ë¦¿ ì„¤ì • (í•„ìˆ˜)
https://github.com/exe-blue/DoAi.Me/settings/secrets/actions

**ìµœì†Œí•œ ë‹¤ìŒì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤:**
```
NEXT_PUBLIC_SUPABASE_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY
SUPABASE_SERVICE_ROLE_KEY
YOUTUBE_API_KEY
```

**íŒŒì¼: `GITHUB_SECRETS_SETUP.md` ì°¸ê³ **

### 2ë‹¨ê³„: ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
```bash
git checkout develop
echo "# Test" >> README_test.txt
git add README_test.txt
git commit -m "Test CI/CD workflow"
git push origin develop
```

GitHub Actions íƒ­ì—ì„œ ì‹¤í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§:
https://github.com/exe-blue/DoAi.Me/actions

### 3ë‹¨ê³„: ë°°í¬ ì„œë²„ ì„¤ì • (ì„ íƒ)

ìŠ¤í…Œì´ì§•/í”„ë¡œë•ì…˜ì— ìë™ ë°°í¬ë¥¼ ì›í•œë‹¤ë©´:

```bash
# ê° ì„œë²„ì—ì„œ:
mkdir -p /app
cd /app

# Docker ì„¤ì¹˜
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# Docker Compose ì„¤ì¹˜
sudo curl -L https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# í™˜ê²½ íŒŒì¼ ìƒì„±
cp .env.staging.example .env.staging
nano .env.staging  # ì‹¤ì œ ê°’ ì…ë ¥
```

---

## ğŸš€ ë°°í¬ íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Git ì €ì¥ì†Œì— í‘¸ì‹œ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                â”‚
          develop ë¸Œëœì¹˜                    main ë¸Œëœì¹˜
                 â”‚                                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  GitHub Actions íŠ¸ë¦¬ê±°   â”‚    â”‚  GitHub Actions íŠ¸ë¦¬ê±°   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         1. Lint & Type Check                      â”‚
    â”‚         2. Unit Tests                             â”‚
    â”‚         3. Build & Push Docker Image              â”‚
    â”‚         4. Security Scan (Trivy)                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Staging ë°°í¬ â”‚  â”‚Production ë°°í¬â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ SSHë¡œ ì„œë²„ì— â”‚  â”‚ SSHë¡œ ì„œë²„ì—  â”‚
    â”‚ docker pull  â”‚  â”‚ docker pull   â”‚
    â”‚ up -d        â”‚  â”‚ up -d         â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚  5. Health Check (30íšŒ)   â”‚
    â”‚  6. ë°°í¬ ì™„ë£Œ             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ì„¤ì • ìƒíƒœ

| í•­ëª© | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| GitHub Actions ì›Œí¬í”Œë¡œìš° | âœ… | CI/CD ì™„ì „ ìë™í™” |
| Docker ì´ë¯¸ì§€ | âœ… | ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œ |
| Staging í™˜ê²½ | âœ… | ì¤€ë¹„ ì™„ë£Œ |
| Production í™˜ê²½ | âœ… | ì¤€ë¹„ ì™„ë£Œ |
| ë³´ì•ˆ ìŠ¤ìº” | âœ… | Trivy í†µí•© |
| ê±´ê°• ê²€ì‚¬ | âœ… | ìë™ ëª¨ë‹ˆí„°ë§ |
| Kubernetes | âœ… | ì„ íƒ ì‚¬í•­ |
| GitHub ì‹œí¬ë¦¿ | âŒ | **í•„ìˆ˜: ìˆ˜ë™ ì„¤ì • í•„ìš”** |
| ë°°í¬ ì„œë²„ | âŒ | **ì„ íƒ: ìˆ˜ë™ ì„¤ì • í•„ìš”** |
| SSH í‚¤ | âŒ | **ë°°í¬ ì‹œ: ìˆ˜ë™ ìƒì„± í•„ìš”** |

---

## ğŸ”— ìœ ìš©í•œ ë§í¬

- **GitHub Actions ëª¨ë‹ˆí„°ë§**: https://github.com/exe-blue/DoAi.Me/actions
- **GitHub ì‹œí¬ë¦¿ ì„¤ì •**: https://github.com/exe-blue/DoAi.Me/settings/secrets/actions
- **Environments ì„¤ì •**: https://github.com/exe-blue/DoAi.Me/settings/environments
- **Branch ë³´í˜¸**: https://github.com/exe-blue/DoAi.Me/settings/branches

---

## ğŸ’¡ ì£¼ìš” ê¸°ëŠ¥

âœ“ **ì™„ì „ ìë™í™”**: í‘¸ì‹œë§Œ í•˜ë©´ í…ŒìŠ¤íŠ¸ â†’ ë¹Œë“œ â†’ ë°°í¬ê¹Œì§€ ìë™ ì‹¤í–‰
âœ“ **Zero-Downtime ë°°í¬**: Rolling updateë¡œ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ì—†ìŒ
âœ“ **ë³´ì•ˆ**: Trivy ìŠ¤ìº”, ë¹„ë£¨íŠ¸ ì‚¬ìš©ì, ë³´ì•ˆ í—¤ë”
âœ“ **ì„±ëŠ¥**: Nginx ìºì‹±, Gzip ì••ì¶•, ë ˆì´íŠ¸ ì œí•œ
âœ“ **ê³ ê°€ìš©ì„±**: ìë™ ë¦¬ìŠ¤íƒ€íŠ¸, ê±´ê°• ê²€ì‚¬, ë¡¤ë°± ê°€ëŠ¥
âœ“ **ìŠ¤ì¼€ì¼ë§**: Kubernetesë¡œ ë‹¤ì¤‘ ë…¸ë“œ í™•ì¥ ê°€ëŠ¥

---

## ğŸ“ í•„ìˆ˜ ì‘ì—…

**ì§€ê¸ˆ ë°”ë¡œ í•´ì•¼ í•  ì¼:**

1. `GITHUB_SECRETS_SETUP.md` ì½ê¸°
2. GitHub ì €ì¥ì†Œ ì‹œí¬ë¦¿ ì„¤ì •
3. `develop` ë¸Œëœì¹˜ì— í…ŒìŠ¤íŠ¸ ì»¤ë°‹ í‘¸ì‹œ
4. GitHub Actions íƒ­ì—ì„œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ í™•ì¸

ì™„ë£Œ í›„, `main` ë¸Œëœì¹˜ë¡œ í‘¸ì‹œí•˜ë©´ ìë™ ë°°í¬ê°€ ì‹œì‘ë©ë‹ˆë‹¤!
