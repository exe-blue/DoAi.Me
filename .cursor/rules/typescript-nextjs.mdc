---
description: TypeScript 및 Next.js 14 App Router 규칙
globs: **/*.{ts,tsx}
alwaysApply: false
---

# TypeScript / Next.js 규칙

## 구조

- App Router: `app/` 하위에 `page.tsx`, `layout.tsx`
- API Routes: `app/api/[resource]/route.ts` (GET, POST, PATCH 등 export)
- 컴포넌트: `components/` (ui, farm)

## API Routes

```typescript
// app/api/tasks/route.ts
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs';
import { cookies } from 'next/headers';

export async function GET(request: Request) {
  const supabase = createRouteHandlerClient({ cookies });
  const { data, error } = await supabase.from('tasks').select('*');
  if (error) return Response.json({ error: error.message }, { status: 500 });
  return Response.json(data);
}
```

## 규칙

- 서버 컴포넌트 기본. 클라이언트 필요 시 `'use client'` 명시
- 타입: `lib/supabase/types.ts`에 DB 타입 정의
- Supabase 클라이언트: `lib/supabase/client.ts` 사용
